<script>
    const initScrollReveal = () => {
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("active");
                        observer.unobserve(entry.target);
                    }
                });
            },
            {
                threshold: 0.1,
                rootMargin: "0px 0px -80px 0px",
            },
        );

        document.querySelectorAll(".reveal").forEach((el) => {
            observer.observe(el);
        });
    };

    initScrollReveal();
    document.addEventListener("astro:page-load", initScrollReveal);
</script>

<style is:global>
    /* Transición Global Premium para Revelación */
    .reveal {
        opacity: 0;
        transform: translateY(40px);
        transition:
            opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1),
            transform 1.2s cubic-bezier(0.16, 1, 0.3, 1),
            filter 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        filter: blur(10px);
        will-change: transform, opacity, filter;
    }

    .reveal.active {
        opacity: 1;
        transform: translateY(0);
        filter: blur(0);
    }

    /* Staggered children utility */
    .reveal-group > * {
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .reveal-group.active > * {
        opacity: 1;
        transform: translateY(0);
    }
</style>
